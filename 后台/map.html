<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>无标题页</title>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.5&ak=DgxAwymU1LpT2KlCUPzOim9E"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <script src="http://d1.lashouimg.com/static/js/release/jquery-1.4.2.min.js" type="text/javascript"></script>
</head>
<body>
<div style="width:100%;font-size:10px; height:100vh" id="container">  </div>
</body>
</html>
<script type="text/javascript"> 

 function getUrlParam(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); 
            var r = window.location.search.substr(1).match(reg); 
            if (r != null) return unescape(r[2]); return null; 
   }
 
    //var lpos=parseFloat(getUrlParam('lat'));//s
   // var rpos=parseFloat(getUrlParam('lng'));//b
   var lpos=22.572887066807;//s
    var rpos=113.86460141127;//b

    var aname=getUrlParam('aname');
    var map = new BMap.Map("container"); 
   // alert(aname);
   // map.centerAndZoom(new BMap.Point(113.86460141127,22.572887066807), 13);  
   map.centerAndZoom(new BMap.Point(parseFloat(rpos),parseFloat(lpos)), 13);  
    map.enableScrollWheelZoom();  
    //var marker=new BMap.Marker(new BMap.Point(113.86460141127,22.572887066807));
    var marker=new BMap.Marker(new BMap.Point(parseFloat(rpos),parseFloat(lpos)));  
    map.addOverlay(marker);

    //alert(lpos);
    //alert(rpos);   
    var licontent="<b>"+unescape(aname)+"</b><br>"; 
       var hiddeninput="<input type=\"hidden\" value=\""+'北京'+"\" name=\"region\" /><input type=\"hidden\" value=\"html\" name=\"output\" /><input type=\"hidden\" value=\"driving\" name=\"mode\" /><input type=\"hidden\" value=\"latlng:"+marker.getPosition().lat+","+marker.getPosition().lng+"|name:天安门"+"\" name=\"destination\" />";  
      var content1 ="<form id=\"gotobaiduform\" action=\"http://api.map.baidu.com/direction\" target=\"_blank\" method=\"get\">" + licontent +hiddeninput+"</form>";   
       var opts1 = { width: 300 };  
    
      var  infoWindow = new BMap.InfoWindow(content1, opts1);  
 marker.openInfoWindow(infoWindow);  
 marker.addEventListener('click',function(){ marker.openInfoWindow(infoWindow);});  
  
function gotobaidu(type)  
{  
    if($.trim($("input[name=origin]").val())=="")  
    {  
        alert("请输入起点！");  
        return;  
    }else{  
        if(type==1)  
        {  
            $("input[name=mode]").val("transit");  
            $("#gotobaiduform")[0].submit();  
        }else if(type==2)  
        {      
            $("input[name=mode]").val("driving");          
            $("#gotobaiduform")[0].submit();  
        }  
    }  
}     
</script>